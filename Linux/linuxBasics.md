# Linux基础命令

命令 参数 文件/文件夹

例：

    ls -a /opt

其中：
+ ls是列出文件夹中内容的命令
+ -a是显示出所有文件以及隐藏文件
+ /opt是指根目录下的opt文件夹

*终端的命令提示符解析*：格式为

    [用户名]@[机器名] [当前所处的工作目录]

相关的命令：
+ whoami 我是谁，显式当前登录的用户
+ hostname 显示当前机器的主机名
+ pwd 显示当前的工作目录绝对路径

## Linux目录结构

Windows中以反斜杠为路径分隔符。

Linux目录分隔符特点：
+ 第一个斜杠代表路径的起点，根目录
+ 第二个斜杠开始，就是目录之间的一个分割符号
+ Linux中只有根目录，相当于Windows中的一个盘

/根目录下有如下几个文件夹：
+ /dev  存放抽象硬件
+ /lib  存放系统库文件
+ /sbin 存放特权级二进制文件
+ /var  存放经常变化的文件
+ /home 普通用户目录
+ /etc  存放配置文件目录
+ /boot 存放内核与启动文件
+ /bin  存放二进制文件（可执行命令）
+ /usr  存放安装程序（软件默认目录）
+ /mnt  文件挂载目录（U盘、光驱）
+ /root 特权用户目录
+ /opt  大型软件存放目录（非强制）

## 核心命令ls和cd

Linux命令的参数可以简写：

    ls -l -h

可以简写为

    ls -lh

### cd命令
cd：change directory的缩写

语法：

    cd [参数] [文件夹]

几个特殊的目录：
+ . 当前的工作目录
+ .. 上一级的工作目录
+ \- 上一次的工作目录
+ ~ 当前系统登陆的用户家目录


### ls命令
ls：list

语法：

    ls [参数] [文件夹]

参数：
+ -a 可以显示以.开头的隐藏的文件。
+ -l 详细地输出文件夹中的内容（所属者、大小、修改时间等）。
+ -h 以人类可阅读的方式输出文件大小。
+ --full-time 以完整的时间格式输出。
+ -t 根据最后一次修改的时间排序文件。
+ -F 在不同的文件结尾输出不同的特殊符号：
  + / 文件夹
  + \* 可执行文件
  + @ 软链接，快捷方式
  + 普通文件类型结尾什么都没有
+ -d 显示文件夹本身信息，不输出其中的内容。
+ -r reverse逆转排序。
+ -S 根据文件大小排序，默认从大到小。
+ -i 显示出文件的inode信息（文件的身份证号，存储了文件的元信息，如大小、位置等）。

### su命令
用户切换命令

语法:

    su - [用户名]

## mkdir命令
make directory 创建文件夹

语法：

    mkdir [文件夹名]
    mkdir {[文件夹1],[文件夹2],[文件夹3],...}   //平级创建
    mkdir -p ./[文件夹1]/[文件夹2]/[文件夹3]/   //递归创建
    mkdir [文件夹名]{1..100}        //创建文件夹名1-文件夹名100

参数：
+ -p 递归创建文件夹

## 绝对相对路径与touch命令
+ 绝对路径：从根目录开始寻找。
+ 相对路径：不从根目录开始寻找。

### touch命令

语法:

    touch [参数] [文件]
    touch [文件夹名]{a..z}        //与mkdir一样


作用：
1. 创建普通文件，在Linux下，文件的后缀格式仅仅是一个名称而已，通过touch创建的都是普通文件。
2. 修改文件的时间。不加参数touch一个已有文件，使其时间改为当前时间；加参数效果如下：

参数：
+ -c， --no--create 不创建任何文件
+ -t STAMP 使用[[CC]YY]MMDDhhmm[.ss]格式的时间替代当前时间
+ -r， --reference=文件 使用指定文件的时间属性替代当前文件时间

## cp命令
语法：

    cp [参数] [源文件] [目标文件]
    cp [参数] [源文件] [目录]
    cp [参数] -t [目录] [源文件]

参数：
+ -r 递归式复制目录，即复制目录下的所有层级的子目录及文件
+ -p 赋值的时候保持属性不变
+ -d 赋值的时候保持软链接（快捷方式）
+ -a 等于 -pdr
+ -i， --interactive 覆盖前询问提示

例子：
1. 将源文件复制为目标文件，在同一个目录下

        cp [源文件] [目标文件]

2. 将源文件复制到目录下

        cp [源文件] [目录]/

3. 将源文件复制到目录下，且改名

        cp [源文件] [目录]/[新名字]

4. 复制整个文件夹，在同一个目录下

        cp -r [文件夹] [目标文件夹]

5. 复制软链接

        cp -d [软链接] [目标软链接]
        //如果不加-d参数，会直接复制原来的文件本身，而不是软链接

*备注*：默认系统做了alias别名功能，当我们输入cp的时候，其实就是输入了cp -i，系统会在覆盖的时候询问。（实测我的kali-virtualbox并没有）

## mv命令
mv命令就是move的缩写，作用是移动或者重命名文件。

语法：

    mv [参数] [源文件] [目标文件]
    mv [参数] [源文件] [目录]
    mv [参数] -t [目录] [源文件]

参数：
+ -f, --force 覆盖前不询问
+ -i, --interactive 覆盖前询问

例子：
1. 移动文件到目标目录

        mv [文件] [目录]

2. 移动多个文件（所有以dol开头的文件和文件夹）放到目标目录中

        mv dol* [目录]

3. 重命名

        mv [旧名字] [新名字]

## rm命令
语法：

    rm [文件名1] [文件名2] ...
    rm -r [文件夹]      //递归删除目录及其内容
    rm -d [空文件夹]    //只能删除空目录

例子：

1. 强制删除当前目录下所有文件和文件夹：

    rm -rf  ./*

2. 强制删除根目录下所有文件和文件夹：

    rm -rf  /*

## 其它命令
### Linux帮助命令
1. man帮助命令

        man [命令]

2. --help

        [命令] --help

3. help

        help [命令]

4. info

        info [命令]

### Linux开关机命令
shutdown重启或关机。

语法：

    shutdown -r [时间]  //在[时间]这么多分钟后重启
    shutdown -h [时间]  //在[时间]这么多分钟后关机

*注*：时间可以用now。

### Linux命令行常用快捷键
+ ctrl + c：cancel取消当前操作
+ ctrl + l：清空屏幕内容
+ ctrl + d：推出当前用户
+ ctrl + a：光标移到行首
+ ctrl + e：光标移到行尾
+ ctrl + u：删除光标到行首的内容

# vim的使用

vim是从vi发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。

vi/vim共分为三种模式，分别是命令模式、输入模式和底线命令模式。

## vim工作模式
+ 进入vim默认为命令模式
+ 输入“i”进入输入模式
+ 按下ESC回到命令模式
+ 输入“:”进入底线命令模式，然后输入“:wq!”强制保存并退出
  + w：write，写入（保存）
  + q：quit，退出
  + !：强制

## vim快捷键
### 光标相关
+ hjkl：分别代表左下上右
+ wb：下一个/上一个单词，以空格为区分
+ 0/^（shift + 6）：移动到行首
+ ￥（shift + 4）：移动到行尾
+ gg：移动到文件第一行
+ G：移动到文件最后一行
+ H：屏幕的开头
+ L：屏幕的结尾
+ M：屏幕的中间

### 命令模式的查找
+ 向下查找：

        /[要找的内容]   //按下n跳转到下一个相关单词

+ 向上查找：

        ?[要找的内容]   

### 命令模式下的复制、粘贴、删除
+ 输入 yy 复制光标所在行
+ 输入 [x]yy 复制x行内容
+ 输入 p 打印粘贴的内容
+ 输入 dd 删除光标当前行
+ 输入 D 删除光标当前位置到行尾内容
+ 输入 x 删除光标**当前的**字符，向后删除
+ 输入 X 删除光标**前面的**字符，向前删除
+ 输入 u 撤销上一步动作

### 快捷操作
+ C 删除光标所在位置（含光标）到行尾的内容，并且立即进入编辑模式
+ o 在当前行的下一行开始编辑
+ O 在当前行的上一行开始编辑
+ A 快速达到行尾并且开始编辑
+ ZZ 快速保存退出

### 批量快捷操作
快捷删除：

1. 输入ctrl+v进入可视块模式
2. 用上下左右命令，选择你选操作的块
3. 选中块后，输入d，删除块内容

快捷输入：

1. 选中块后，输入I，进行写代码
2. 按下ESC两次，会自动生成多行代码

## swp数据文件的恢复
使用vi/vim，当你打开一个文件，vi就会生成这么一个.(filename)swp文件以备不测，如果你正常退出，那么这个这个swp文件将会自动删除。

但是：
1. 当你用多个程序编辑同一个文件时
2. 非常规退出时

非正常关闭vi/vim编辑器，会生成一个.swp文件。（这是一个不可见的文件，要用ls -a来查看）

解决方式：
1. 第一种情况的话，为了避免同一个文件产生两个不同的版本（vim中的原话），还是建议选择readonly为好。 
2. 第二种情况的话，你可以用vim -r filename恢复，然后再把swp文件删除（这个时候要确保你的swp文件没有用处）。

# 读取文件信息
## 重定向符号
[重定向](https://www.jianshu.com/p/257b5b09a0ba)的意思是，“将数据传到其他地方”

+ \>        输出覆盖重定向
+ \>\>      输出追加重定向
+ <或<<     标准输入重定向

语法：

    cat [源文件] > [目标文件]   //覆盖写入
    cat [源文件] >> [目标文件]  //追加写入
    cat < [文件]    //把文件中的数据发送给cat去读取
    cat >> [文件] << EOF //EOF是一个代表文件开头或者结尾的关键字

*注*：cat命令的-n参数可以给输出添加行号：

    cat -n [文件]

## cat命令详解
cat：concatenate，指的是可以连接多个文件且打印到屏幕，或是重定向到文件中。

cat功能：
+ 查看文件内容

        cat file.txt

+ 多个文件合并

        cat file1.txt file2.txt > file3.txt

+ 非交互式编辑或追加内容

        cat >> file.txt << EOF

+ 清空文件内容（/dev/null是linux系统的黑洞文件）

        cat /dev/null > file.txt
        > file.txt          //将空覆盖写入文件

参数：
+ -b：对非空行显示行号
+ -n：对所有行显示行号
+ -E：在每行结尾加上￥符号
+ -s：不输出多行空行（多个空行并为一个）

## 其它读取文件内容命令
### tac命令
与cat命令查看文件结果相反，按行逆转。

### 管道符 |

    Command1 | Command2 | Command3

管道符可以把Command1的输出stdout当作第二条命令Command2的stdin。 

例如：

已知有过滤命令grep，可以过滤查找出含有关键词的句子：

    grep [关键词]

则如下操作：

    cat file.txt | grep [关键词]

可以将file.txt中含有关键词的句子找出来。

### more命令 & less命令
用类分屏显示大量文本内容。

语法：

    more [文件名] #分屏显示文件内容

+ 按下enter是下一行
+ 空格是向下滚动一个屏幕大小
+ =是显示当前行号
+ 按下q 是退出more

### head 和 tail命令
#### head
head命令用于查看文件开头的n行。

语法：

    head -x file.txt #查看前面x行

+ -c 指定字符数量，显示字符数。（Linux中一个汉字占3个字符）

#### tail
tail默认从后向前看10行，也可以同上方法指定行数。

+ -f 实时刷新文件内容变化。输入如下命令之后终端就显示出文件内容，并且随着文件变化而实时输出。

    tail -f file.txt

+ -F 不断地打开文件，一般和-f结合使用。也就是说哪怕文件不存在，-F参数也会让控制台等待，直到该文件被创建。

## cut命令用法
语法：

    cut -c x file.txt #输出file中每一行第x个字符
    cut -c x-y file.txt #输出file中每一行第x到y个字符
    cut -c x,y file.txt #输出file中每一行第x和第y个字符
    cut -c -y file.txt #输出file中每一行开始到第y个字符
    cut -c x- file.txt #输出file中每一行第x到结尾的字符

*注*：数字是从1开始数的，而不是从0开始。

其他参数：
+ -d 自定义分隔符，默认以tab为分隔符
+ -f 与-d一起使用，指定显示哪个区域

        cut -d ":" -f x file.txt 
        #以":"为分隔符，显示第x块内容
        #此处数字的用法与-c一致

*注*：cut分隔符必须是单个字符，因此不能是中文汉字。

例：

    cut -d ":" -f 3 file.txt | head -5
    #分隔完之后查看前五行前三列

## sort排序命令
sort命令用于将输入的文件内容按照规则排序，然后输出结果。

语法：

    sort [参数] file.txt

参数：
+ -b 忽略前导的空白区域
+ -n 根据字符串数值比较（将一行看作一个字符串）
+ -r 逆序输出排序结果
+ -u 对排序结果去重
+ -t 指定分隔符
+ -k 指定位置

例：

    sort -n -t "." -k 4 file.txt
    #将文件按照"."分割，并按照第四块内容从小到大排序

